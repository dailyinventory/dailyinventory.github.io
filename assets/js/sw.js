const CACHE_NAME="daily-inventory-v1",ASSETS_TO_CACHE=["/","/index.html","/assets/js/script.js","/assets/js/dayjs-init.js","/assets/css/jquery-ui.css","/manifest.json","/assets/images/icons/favicon.ico","/assets/images/icons/favicon-32x32.png","/assets/images/icons/favicon-16x16.png","/assets/images/icons/apple-touch-icon.png","/assets/images/icons/icon-192x192.png"];self.addEventListener("install",(e=>{e.waitUntil(caches.open(CACHE_NAME).then((e=>e.addAll(ASSETS_TO_CACHE))).then((()=>self.skipWaiting())))})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.map((e=>{if(e!==CACHE_NAME)return caches.delete(e)}))))).then((()=>self.clients.claim())))})),self.addEventListener("fetch",(e=>{e.respondWith(caches.match(e.request).then((s=>{if(s)return s;const t=e.request.clone();return fetch(t).then((s=>{if(!s||200!==s.status||"basic"!==s.type)return s;const t=s.clone();return caches.open(CACHE_NAME).then((s=>{e.request.url.includes("chrome-extension")||e.request.url.includes("sockjs-node")||s.put(e.request,t)})),s}))})).catch((()=>{if("navigate"===e.request.mode)return caches.match("/index.html")})))})),self.addEventListener("sync",(e=>{"sync-data"===e.tag&&e.waitUntil(syncData())})),self.addEventListener("push",(e=>{const s={body:e.data.text(),icon:"/assets/images/icons/icon-192x192.png",badge:"/assets/images/icons/favicon-32x32.png",vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:1},actions:[{action:"explore",title:"View Details",icon:"/assets/images/icons/favicon-32x32.png"}]};e.waitUntil(self.registration.showNotification("Daily Inventory",s))})),self.addEventListener("notificationclick",(e=>{e.notification.close(),e.waitUntil(clients.openWindow("/"))}));